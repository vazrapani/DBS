<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>DB STORE 어드민</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@800;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script defer src="admin.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <style>
        body { background: #222; color: #fff; font-family: Pretendard, sans-serif; }
        .login-container { background: #333; padding: 32px 24px; border-radius: 12px; box-shadow: 0 4px 24px rgba(0,0,0,0.2); width: 320px; }
        .login-title { font-size: 1.3rem; margin-bottom: 24px; text-align: center; }
        .login-form label { display: block; margin-bottom: 8px; font-size: 15px; }
        .login-form input { width: 100%; padding: 10px; margin-bottom: 16px; border-radius: 6px; border: none; font-size: 15px; }
        .login-form button { width: 100%; padding: 12px; background: #4a90e2; color: #fff; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; }
        .login-form button:active { background: #357ab8; }
        .error-message { color: #ff6b6b; margin-bottom: 12px; text-align: center; }
        .product-anim {
            transition: transform 0.3s cubic-bezier(0.4,0,0.2,1);
            will-change: transform;
        }
        .card-moved {
            background: #fffbe6 !important;
            box-shadow: 0 0 12px 4px #ffe066;
            transition: background 1s, box-shadow 1s;
        }
        .product-add-group, .product-add-upload-btn {
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.03);
            padding: 12px;
            margin: 0;
            background: none;
            transition: height 0.5s cubic-bezier(0.4,0,0.2,1), opacity 0.5s;
            overflow: hidden;
            opacity: 1;
            height: auto;
            box-sizing: border-box;
        }
        .product-add-group.closed {
            opacity: 1;
            height: 24px !important;
            pointer-events: none;
        }
        .product-add-header, .product-list-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 12px;
        }
        .product-add-title {
            display: block;
            color: rgba(247, 249, 244, 0.6);
            font-size: 14px;
            text-align: center;
            margin: 12px 0 18px 0;
            font-family: 'Pretendard', 'Pretendard Variable', sans-serif;
            font-weight: 400;
        }
        .product-list-title {
            display: block;
            color: rgba(247, 249, 244, 0.6);
            font-size: 14px;
            text-align: center;
            margin: 72px 0 18px 0;
            font-family: 'Pretendard', 'Pretendard Variable', sans-serif;
            font-weight: 400;
        }
        .product-add-save-btn, .product-list-save-btn {
            width: 100%;
            height: 60px;
            padding: 12px;
            background: #4a90e2;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 12px;
        }
        .product-add-save-btn:active, .product-list-save-btn:active {
            background: #357ab8;
        }
        .product-add-message-area {
            min-height: 24px;
            width: 100%;
            text-align: center;
            margin-top: 12px;
            margin-bottom: 12px;
            position: relative;
        }
        .product-add-message {
            display: block;
            min-height: 24px;
            font-size: 12px;
        }
        .product-add-upload-btn {
            width: 100%;
            height: 60px;
            padding: 12px;
            background: #4a90e2;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 12px;
            transition: height 0.2s cubic-bezier(0.4,0,0.2,1), opacity 0.2s;
            overflow: hidden;
            opacity: 1;
        }
        .product-add-upload-btn:active {
            background: #357ab8;
        }
        .product-add-upload-btn.closed {
            opacity: 1;
            height: 60px;
            pointer-events: none;
            background: rgba(255,255,255,0.03);
            color: rgba(255,255,255,0.10);
            border: none;
        }
        .product-add-inner-group {
            padding: 12px 16px;
        }
        .greeting-title {
            display: block;
            color: rgba(247, 249, 244, 0.6);
            font-size: 14px;
            text-align: center;
            margin: 12px 0 18px 0;
            font-family: 'Pretendard', 'Pretendard Variable', sans-serif;
            font-weight: 400;
        }
        .product-add-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        .product-add-row:last-child {
            margin-bottom: 0;
        }
        #productCategoryRow {
            margin-bottom: 0;
        }
        .product-add-label {
            min-width: 90px;
            max-width: 90px;
            flex-shrink: 0;
            color: rgba(247, 249, 244, 0.9);
            font-size: 16px;
            font-weight: 400;
            text-align: left;
            margin-right: 0;
            margin-left: 4px;
            display: flex;
            align-items: center;
            height: 100%;
        }
        .product-add-row.price-row {
            align-items: flex-start;
        }
        .product-add-row.price-row > .product-add-label {
            margin-top: 12px;
        }
        .product-add-input,
        textarea.product-add-input {
            width: 100%;
            flex: 1;
            font-size: 15px;
            padding: 10px 16px;
            border-radius: 4px;
            border: 1px solid rgba(255,255,255,0.05);
            background: none;
            color: #fff;
            min-width: 0;
            transition: border-color 0.2s, background 0.2s;
            box-sizing: border-box;
        }
        .product-add-input:focus,
        .product-add-input:hover {
            background: rgba(16,16,16,0.2);
            border-color: rgba(255,255,255,0.1);
            outline: none;
        }
        .product-add-input[type="file"] {
            padding: 0;
            background: none;
        }
        .product-add-inner-group label {
            color: rgba(247, 249, 244, 0.9);
        }
        .select-wrap {
            position: relative;
            flex: 1;
            width: 100%;
            display: flex;
            align-items: center;
        }
        #productCategory {
            width: 100%;
            padding-right: 32px;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background: none;
            border: 1px solid rgba(255,255,255,0.10);
            transition: border-color 0.2s, background 0.2s;
            font-size: 16px;
            color: rgba(255,255,255,0.9);
        }
        #productCategory:focus,
        #productCategory:hover {
            background: rgba(16,16,16,0.2);
            border-color: rgba(255,255,255,0.40);
            outline: none;
        }
        .custom-select-arrow {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%) rotate(0deg);
            width: 10px;
            height: 10px;
            pointer-events: none;
            transition: transform 0.2s;
            z-index: 2;
        }
        .product-add-row.open .custom-select-arrow {
            transform: translateY(-50%) rotate(180deg);
        }
        #productCategory option, #productCategory optgroup {
            background: rgba(16,16,16,0.1);
            color: #fff;
        }
        #productCategory option {
            color: rgba(16,16,16,0.4);
        }
        #productCategory option:checked {
            color: #101010;
        }
        #productCategory option:hover {
            background: rgba(255,255,255,0.05);
        }
        .product-add-input#productDesc:focus,
        .product-add-input#productDesc:hover {
            background: rgba(16,16,16,0.2);
            border: none;
            outline: none;
        }
        .product-add-input#productDesc {
            min-height: 110px;
            height: 110px;
            line-height: 1.5;
            resize: none;
            background: none;
            border: none;
            transition: border-color 0.2s, background 0.2s;
        }
        /* 상품 설명 textarea placeholder 16px, #fff, 10%로 통일 */
        #productDesc::placeholder {
            color: rgba(255,255,255,0.10);
            font-size: 16px;
        }
        /* 상품 설명 textarea 포커스/호버 시 배경 */
        #productDesc:focus,
        #productDesc:hover {
            background: rgba(16,16,16,0.2);
        }
        /* 상품 설명 desc-input-group 포커스/호버 시 스트로크 */
        .desc-input-group.focused {
            border: 1px solid rgba(255,255,255,0.60);
        }
        .price-inputs-group {
            width: 100%;
        }
        .price-inputs-group > div {
            display: flex;
            flex-direction: row;
            gap: 8px;
            width: 100%;
            margin-bottom: 8px;
        }
        .add-price-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(16,16,16,0.4);
            border: 1px solid rgba(255,255,255,0.10);
            border-radius: 4px;
            height: 40px;
            color: #fff;
            width: 100%;
            box-sizing: border-box;
            transition: background 0.2s, border-color 0.2s;
            cursor: pointer;
            padding: 0;
            font-size: 16px;
        }
        .add-price-btn:focus,
        .add-price-btn:hover {
            background: rgba(16,16,16,0.6);
            border: 1px solid rgba(255,255,255,0.60);
        }
        .remove-price-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            border-radius: 4px;
            background: rgba(16,16,16,0.0);
            border: 1px solid rgba(255,255,255,0.05);
            color: #fff;
            height: 40px;
            width: 100%;
            transition: background 0.2s, border-color 0.2s;
            font-size: 16px;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: pointer;
        }
        .remove-price-btn:hover,
        .remove-price-btn:active {
            background: rgba(16,16,16,0.1);
            border-color: rgba(255,255,255,0.10);
        }
        .remove-price-row-btn {
            display: none;
            width: 30px;
            height: 30px;
            min-width: 30px;
            min-height: 30px;
            max-width: 30px;
            max-height: 30px;
            border-radius: 50%;
            background: rgba(16,16,16,0.0);
            border: 1px solid rgba(255,255,255,0.05);
            align-items: center;
            justify-content: center;
            padding: 0;
            margin-left: 8px;
            cursor: pointer;
            transition: background 0.2s, border-color 0.2s;
        }
        .remove-price-row-btn:hover,
        .remove-price-row-btn:active {
            background: rgba(16,16,16,0.1);
            border-color: rgba(255,255,255,0.10);
        }
        .label-line-block { width: 100%; }
        .label-line-margin { height: 16px; }
        .label-line {
            width: 100%;
            height: 1px;
            background: rgba(255,255,255,0.02);
        }
        .label-line-content {
            display: flex;
            align-items: center;
        }
        .custom-file-btn {
            display: inline-block;
            padding: 10px 24px;
            background: #222;
            color: #fff;
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 6px;
            font-size: 15px;
            cursor: pointer;
            transition: background 0.2s, border-color 0.2s;
            margin-bottom: 0;
        }
        .custom-file-btn:hover,
        .custom-file-btn:active {
            background: #333;
            border-color: #4a90e2;
            color: #4a90e2;
        }
        #productImagePreview img {
            max-width: 100%;
            max-height: 274px;
            width: 100%;
            height: 274px;
            border-radius: 4px;
            display: block;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        }
        /* 상품 사진 업로드에만 적용되는 커스텀 파일 버튼 */
        .form-section--image .custom-file-btn {
            display: inline-block;
            padding: 10px 24px;
            background: #222;
            color: #fff;
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 6px;
            font-size: 15px;
            cursor: pointer;
            transition: background 0.2s, border-color 0.2s;
            margin-bottom: 0;
        }
        .form-section--image .custom-file-btn:hover,
        .form-section--image .custom-file-btn:active {
            background: #333;
            border-color: #4a90e2;
            color: #4a90e2;
        }
        .form-section--image #productImagePreview img {
            max-width: 100%;
            max-height: 274px;
            width: 100%;
            height: 274px;
            border-radius: 4px;
            display: block;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        }
        .product-image-file-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 274px;
            background: rgba(16,16,16,0.4);
            color: #fff;
            border: 1px dashed rgba(255,255,255,0.10);
            border-radius: 4px;
            font-size: 15px;
            cursor: pointer;
            transition: background 0.2s;
            width: 100%;
            box-sizing: border-box;
            padding: 0;
            margin-bottom: 0;
        }
        .product-image-file-btn:hover,
        .product-image-file-btn:active {
            background: rgba(16,16,16,0.6);
            border: 1px solid rgba(255,255,255,0.60);
        }
        .product-image-file-btn .product-upload-icon {
            opacity: 0.15;
            transition: opacity 0.2s;
        }
        .product-image-file-btn:hover .product-upload-icon,
        .product-image-file-btn:active .product-upload-icon,
        .product-image-file-btn.focus .product-upload-icon {
            opacity: 0.6;
        }
        .product-image-file-btn .btn-text {
            color: rgba(255,255,255,0.2);
            font-size: 16px;
            transition: color 0.2s;
        }
        .product-image-file-btn:hover .btn-text,
        .product-image-file-btn:active .btn-text,
        .product-image-file-btn.focus .btn-text {
            color: rgba(255,255,255,0.6);
        }
        .gallery-image-file-btn {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 60px;
            background: rgba(16,16,16,0.4);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.10);
            border-radius: 4px;
            font-size: 15px;
            cursor: pointer;
            transition: background 0.2s, border-color 0.2s;
            margin-bottom: 0;
            box-sizing: border-box;
            padding: 0;
            overflow: hidden;
        }
        .gallery-image-file-btn .btn-text {
            position: absolute;
            left: 0; right: 0; top: 0; bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
        .file-count-badge {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            pointer-events: none;
            font-size: 12px;
            border: 2px solid rgba(255,255,255,0.05);
            box-shadow: none;
            outline: none;
        }
        .gallery-image-file-btn:hover,
        .gallery-image-file-btn:active {
            background: rgba(16,16,16,0.6);
            border: 1px solid rgba(255,255,255,0.60);
        }
        .form-section--image .product-add-label {
            margin-bottom: 12px;
        }
        .form-section--image .product-image-file-btn {
            margin-top: 0;
        }
        .form-section--image .product-add-row {
            margin-bottom: 0;
        }
        #toggleProductAddBtn {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: 2px solid rgba(255,255,255,0.03);
            border-radius: 50%;
            outline: none;
            cursor: pointer;
            padding: 0;
            transition: background 0.2s, border-color 0.2s;
        }
        #toggleProductAddBtn:hover,
        #toggleProductAddBtn:active,
        #toggleProductAddBtn:focus,
        #toggleProductAddBtn:focus-visible {
            background: rgba(16,16,16,0.10);
            border: 2px solid rgba(255,255,255,0.10);
            outline: none;
        }
        #productTitle {
            background: none;
            border: 1px solid rgba(255,255,255,0.10);
            transition: border-color 0.2s, background 0.2s;
        }
        #productTitle:focus,
        #productTitle:hover {
            background: rgba(16,16,16,0.2);
            border-color: rgba(255,255,255,0.60);
            outline: none;
        }
        .amount.product-add-input, .price.product-add-input {
            background: none;
            border: 1px solid rgba(255,255,255,0.10);
            transition: border-color 0.2s, background 0.2s;
        }
        .amount.product-add-input:focus,
        .amount.product-add-input:hover,
        .price.product-add-input:focus,
        .price.product-add-input:hover {
            background: rgba(16,16,16,0.2);
            border-color: rgba(255,255,255,0.60);
            outline: none;
        }
        .amount.product-add-input::placeholder,
        .price.product-add-input::placeholder {
            color: rgba(247, 249, 244, 0.10);
        }
        #greetingText {
            width: 100%;
            line-height: 1.5;
            resize: none;
            background: none;
            border: 1px solid rgba(255,255,255,0.10);
            color: #fff;
            border-radius: 4px;
            box-sizing: border-box;
            transition: border-color 0.2s, background 0.2s;
        }
        #greetingText:focus,
        #greetingText:hover {
            background: rgba(16,16,16,0.2);
            border-color: rgba(255,255,255,0.60);
            outline: none;
        }
        .product-upload-icon {
            opacity: 0.15;
            transition: opacity 0.2s;
        }
        .gallery-image-file-btn:hover .product-upload-icon,
        .gallery-image-file-btn:active .product-upload-icon,
        .gallery-image-file-btn.focus .product-upload-icon {
            opacity: 0.6;
        }
        .greeting-message-area {
            margin: 12px 0;
        }
        .product-list-select-wrap { position:relative; flex:1; width:100%; display:flex; align-items:center; }
        .product-list-select {
            width: 100%;
            padding-left: 16px;
            padding-right: 32px;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background: none;
            border: 1px solid rgba(255,255,255,0.10);
            transition: border-color 0.2s, background 0.2s;
            font-size: 16px;
            color: rgba(255,255,255,0.9);
            height: 40px;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .product-list-select:focus,
        .product-list-select:hover {
            background: rgba(16,16,16,0.2);
            border-color: rgba(255,255,255,0.40);
            outline: none;
        }
        .product-list-select option, .product-list-select optgroup {
            background: rgba(16,16,16,0.1);
            color: #fff;
        }
        .product-list-select option {
            color: rgba(16,16,16,0.4);
        }
        .product-list-select option:checked {
            color: #101010;
        }
        .product-list-select option:hover {
            background: rgba(255,255,255,0.05);
        }
        .product-list-custom-select-arrow {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%) rotate(0deg);
            width: 10px;
            height: 10px;
            pointer-events: none;
            transition: transform 0.2s;
            z-index: 2;
        }
        .product-list-select-wrap.open .product-list-custom-select-arrow {
            transform: translateY(-50%) rotate(180deg);
        }
        .product-list-group {
            border-radius: 8px;
            padding: 24px 28px;
            display: flex;
            flex-direction: column;
            row-gap: 16px;
        }
        #productList {
            display: flex;
            flex-direction: column;
            row-gap: 16px;
        }
        .product-list-item-wrapper {
            position: relative;
            display: flex;
            flex-direction: row;
            align-items: stretch;
            width: 100%;
        }
        .product-order-controls {
            display: flex !important;
            flex-direction: row !important;
            align-items: center !important;
            gap: 8px !important;
            margin: 0 !important;
        }
        .product-list-item {
            flex: 1 1 0;
            /* 기존 스타일 유지 */
        }
        .product-admin-image-area {
            width: 80px;
            flex: 0 0 80px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            background: rgba(16,16,16,0.4);
            border-radius: 4px;
        }
        .product-edit-btn, .product-delete-btn {
            width: 30px;
            height: 30px;
            min-width: 30px;
            min-height: 30px;
            max-width: 30px;
            max-height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255,255,255,0.05);
            background: none;
            padding: 0;
            box-sizing: border-box;
            cursor: pointer;
        }
        .product-list-message-area {
            margin-top: 12px;
            margin-bottom: 136px;
        }
        .product-list-message-area span,
        .product-add-message-area span,
        .gallery-upload-message-area span,
        .gallery-list-message-area span {
            display: block;
            min-height: 24px;
            font-size: 14px;
            font-family: 'Pretendard', 'Pretendard Variable', sans-serif;
            text-align: center;
            margin-top: 12px;
            margin-bottom: 12px;
        }
        .product-list-error, #galleryUploadErr, #galleryListSaveErr, .product-add-message.error {
            color: #ff6b6b !important;
        }
        .admin-gallery-item {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            padding: 0;
            background: rgba(16,16,16,0.9);
            border-radius: 4px;
        }
        .admin-gallery-item-main {
            width: 100%;
            display: flex;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center;
        }
        .admin-gallery-item-actions {
            width: 100%;
            display: flex;
            flex-direction: row !important;
            align-items: center !important;
            justify-content: center;
        }
        .desc-input-group {
            display: flex;
            flex-direction: column;
            gap: 0;
        }
        .product-add-input#productDesc {
            margin-bottom: 0;
        }
        .desc-char-counter {
            margin-top: 0;
            padding: 10px 16px;
            border-top: 1px solid rgba(255,255,255,0.03);
            background: rgba(16,16,16,0.2);
        }
        /* 상품추가 입력폼 placeholder 16px, #fff, 10%로 통일 */
        input.product-add-input::placeholder,
        textarea.product-add-input::placeholder {
            color: rgba(255,255,255,0.10);
            font-size: 16px;
        }
        #productForm {
            width: 100%;
        }
        .file-upload-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }
        .preview-delete-btn {
            border: 2px solid rgba(255,255,255,0.4);
        }
    </style>
</head>
<body style="background:#101010; color:#fff;">
    <div id="admin-root">
        <!-- 타이틀 영역 -->
        <div class="admin-title-area">
            <span class="admin-title-text">DB STORE</span>
        </div>
        <!-- 메뉴 영역 -->
        <div class="admin-menu-area">
            <div class="admin-menu-group">
                <button class="admin-menu-btn active" data-tab="product">상품 관리</button>
                <button class="admin-menu-btn" data-tab="greeting">인사말</button>
                <button class="admin-menu-btn" data-tab="gallery">현장 사진</button>
            </div>
        </div>
        <!-- 컨텐츠 영역 -->
        <div class="admin-content-area">
            <div id="tab-product" class="admin-tab-section">
                <div id="productManager">
                    <span class="product-add-title" style="display:flex;align-items:center;justify-content:center;position:relative;width:100%;">상품 추가
                      <button id="toggleProductAddBtn" type="button" style="width:30px;height:30px;display:flex;align-items:center;justify-content:center;background:none;cursor:pointer;padding:0;position:absolute;right:0;top:50%;transform:translateY(-50%);">
                        <img src="images/icon-open.svg" alt="열기" style="width:16px;height:16px;"/>
                      </button>
                    </span>
                    <div class="product-add-group closed">
                        <div class="product-add-inner-group">
                        <form id="productForm">
                            <div class="form-section form-section--category">
                                <div class="product-add-row" id="productCategoryRow">
                                    <span class="product-add-label">카테고리</span>
                                    <div class="select-wrap">
                                        <select id="productCategory" name="category" class="product-add-input">
                                            <option value="red-pepper">고추가루</option>
                                            <option value="perilla">들깨가루</option>
                                            <option value="seafood">수산물</option>
                                            <option value="processed">공산품</option>
                                        </select>
                                        <img src="images/icon-arrow-down.svg" class="custom-select-arrow" alt="아래 화살표">
                                    </div>
                                </div>
                            </div>
                            <div class="form-section form-section--title">
                                <div class="product-add-row">
                                    <div class="label-line-block">
                                        <div class="label-line-margin"></div>
                                        <div class="label-line"></div>
                                        <div class="label-line-margin"></div>
                                        <div class="label-line-content">
                                            <span class="product-add-label">상품명</span>
                                            <input type="text" id="productTitle" class="product-add-input" required placeholder="상품명을 입력해 주세요">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="label-line-block">
                                <div class="label-line-margin"></div>
                                <div class="label-line"></div>
                                <div class="label-line-margin"></div>
                            </div>
                            <div class="form-section form-section--price">
                                <div class="product-add-row price-row" style="flex-direction: column; align-items: flex-start;">
                                    <span class="product-add-label" style="margin-bottom:12px; margin-top:0;">상품 가격</span>
                                    <div class="price-inputs-group" style="width:100%;">
                                        <div id="priceInputs" style="display:flex; flex-direction:row; gap:8px; width:100%; margin-bottom:8px; align-items:center;">
                                            <input type="text" class="amount product-add-input" placeholder="용량" required>
                                            <input type="text" class="price product-add-input" placeholder="가격" required>
                                            <button type="button" class="remove-price-row-btn"><img src="images/icon-minus.svg" alt="삭제" style="width:20px;height:20px;"></button>
                                        </div>
                                    </div>
                                    <button type="button" onclick="addPriceInput()" class="add-price-btn" style="width:100%;"><img src="images/icon-add.svg" alt="추가" style="width:20px;height:20px;"></button>
                                    <button type="button" onclick="removePriceInput()" class="remove-price-btn" style="width:100%; display:none;"><img src="images/icon-minus.svg" alt="삭제" style="width:20px;height:20px;"></button>
                                </div>
                            </div>
                            <div class="label-line-block">
                                <div class="label-line-margin"></div>
                                <div class="label-line"></div>
                                <div class="label-line-margin"></div>
                            </div>
                            <div class="form-section form-section--desc">
                                <div style="margin-bottom:0;">
                                    <label for="productDesc" class="product-add-label" style="display:block;width:100%;margin-bottom:12px;">상품 설명</label>
                                    <div class="desc-input-group">
                                        <textarea id="productDesc" class="product-add-input" rows="3" placeholder="상품 설명을 입력해 주세요" maxlength="75"></textarea>
                                        <div id="descCharCounter" class="desc-char-counter">글자 제한&nbsp;<span id="descCharCount">0</span> / 75</div>
                                    </div>
                                </div>
                            </div>
                            <div class="label-line-block">
                                <div class="label-line-margin"></div>
                                <div class="label-line"></div>
                                <div class="label-line-margin"></div>
                            </div>
                            <div class="form-section form-section--image">
                                <div class="product-add-row" style="width:100%; height:100%; flex-direction: column; align-items: center; position:relative;">
                                    <span class="product-add-label">상품 사진</span>
                                    <label for="productImage" class="product-image-file-btn" id="productImageLabel" style="position:relative;overflow:hidden;">
                                        <span class="file-upload-content">
                                            <img src="images/icon-upload.svg" alt="업로드" class="product-upload-icon" style="width:40px;height:40px;display:block;margin-bottom:8px;">
                                            <span class="btn-text" style="display:block;width:100%;text-align:center;">파일 선택</span>
                                        </span>
                                    </label>
                                    <input type="file" id="productImage" class="product-add-input" accept="image/*" required style="display:none;">
                                </div>
                            </div>
                            <div class="product-add-row">
                                <span id="productFormMsg"></span>
                            </div>
                        </form>
                        </div>
                    </div>
                    <button class="product-add-upload-btn closed" type="button" disabled>상품 추가</button>
                    <div class="product-add-message-area">
                        <span class="product-add-message" style="display:block; min-height:24px;"></span>
                    </div>
                    <span class="product-list-title">상품 목록</span>
                    <div class="product-list-group">
                        <div>
                            <div class="product-list-select-wrap" style="position:relative;flex:1;width:100%;display:flex;align-items:center;">
                                <div class="select-wrap">
                                    <select id="productListCategory" class="product-add-input" style="width:100%;padding-left:16px;padding-right:32px;appearance:none;-webkit-appearance:none;-moz-appearance:none;background:none;border:1px solid rgba(255,255,255,0.10);transition:border-color 0.2s,background 0.2s;font-size:16px;color:#fff;height:40px;border-radius:4px;box-sizing:border-box;">
                                        <option value="red-pepper" selected>고추가루</option>
                                        <option value="perilla">들깨가루</option>
                                        <option value="seafood">수산물</option>
                                        <option value="processed">공산품</option>
                                    </select>
                                    <img src="images/icon-arrow-down.svg" class="custom-select-arrow" alt="아래 화살표">
                                </div>
                            </div>
                        </div>
                        <div id="productList"></div>
                    </div>
                    <button class="product-list-save-btn">상품 목록 저장</button>
                    <div class="product-list-message-area">
                        <span class="product-list-message"></span>
                    </div>
                </div>
            </div>
            <div id="tab-greeting" class="admin-tab-section" style="display:none;">
                <span class="greeting-title">인사말 수정</span>
                <form id="greetingForm">
                    <div class="greeting-form-group">
                        <textarea id="greetingText" rows="7"></textarea>
                    </div>
                    <button type="submit" class="greeting-save-btn">인사말 수정</button>
                    <div class="greeting-message-area" style="min-height:24px;margin-top:10px;text-align:center;transition:opacity 0.5s;opacity:0;"></div>
                </form>
            </div>
            <div id="tab-gallery" class="admin-tab-section" style="display:none;">
                <span class="gallery-section-title" id="galleryUploadTitle">현장 사진 추가</span>
                <div class="gallery-form-group1">
                    <form id="galleryUploadForm" enctype="multipart/form-data" style="margin-bottom:0;">
                        <div class="form-section form-section--image">
                            <div class="product-add-row" style="width:100%; height:100%; flex-direction: column; align-items: center; position:relative;">
                                <label for="galleryFile" class="product-image-file-btn" id="galleryFileLabel" style="position:relative;overflow:hidden;width:274px;height:274px;">
                                    <span class="file-upload-content">
                                        <img src="images/icon-upload.svg" alt="업로드" class="product-upload-icon" style="width:40px;height:40px;display:block;margin-bottom:8px;">
                                        <span class="btn-text" style="display:block;width:100%;text-align:center;">파일 선택</span>
                                    </span>
                                    <input type="file" id="galleryFile" class="product-add-input" accept="image/*" style="display:none;" multiple>
                                </label>
                                <div class="preview-image-wrapper" id="galleryPreviewArea" style="position:absolute;top:0;left:0;width:100%;height:100%;display:none;align-items:center;justify-content:center;"></div>
                            </div>
                        </div>
                    </form>
                </div>
                <button id="galleryUploadBtn" class="greeting-save-btn" type="submit" style="width:100%;height:60px;margin-top:12px;background:#4a90e2;color:#fff;border:none;border-radius:8px;font-size:16px;cursor:pointer;">현장 사진 추가</button>
                <div class="gallery-upload-message-area" style="min-height:24px;margin:12px 0;text-align:center;transition:opacity 0.5s;opacity:0;font-size:12px;"></div>
                <div id="galleryUploadBottomSpacer"></div>
                <span class="gallery-section-title" id="galleryListTitle">현장 사진 목록</span>
                <div class="gallery-form-group2">
                    <div id="galleryList"></div>
                </div>
                <button id="galleryListSaveBtn" class="greeting-save-btn" type="button">현장 사진 목록 저장</button>
                <div class="gallery-list-message-area">
                    <span id="galleryListSaveMsg" style="display:none;">저장 완료</span>
                    <span id="galleryListSaveErr" style="display:none;">저장 실패</span>
                </div>
                <div id="galleryListBottomSpacer"></div>
            </div>
        </div>
    </div>
    <script>
    // 커스텀 셀렉트 화살표 회전 (드롭다운이 열린 상태에서 다시 클릭해도 화살표가 원위치로 돌아오게 개선)
    document.addEventListener('DOMContentLoaded', function() {
        const select = document.getElementById('productCategory');
        const row = document.getElementById('productCategoryRow');
        if (select && row) {
            select.addEventListener('mousedown', function(e) {
                if (row.classList.contains('open')) {
                    row.classList.remove('open');
                    select.blur();
                    e.preventDefault(); // 드롭다운이 다시 열리지 않게
                } else {
                    row.classList.add('open');
                    setTimeout(() => select.focus(), 0);
                }
            });
            ['blur', 'focusout', 'change'].forEach(evt => {
                select.addEventListener(evt, function() {
                    row.classList.remove('open');
                });
            });
        }
    });
    // 설명 입력란 글자수 카운터 및 제한 + 포커스 시 그룹 border 진하게
    document.addEventListener('DOMContentLoaded', function() {
        const desc = document.getElementById('productDesc');
        const counter = document.getElementById('descCharCounter');
        const countSpan = document.getElementById('descCharCount');
        const group = desc ? desc.closest('.desc-input-group') : null;
        if (desc && counter && countSpan && group) {
            const maxLen = 75;
            function updateCounter() {
                let val = desc.value;
                if (val.length > maxLen) {
                    desc.value = val.slice(0, maxLen);
                    val = desc.value;
                }
                countSpan.textContent = val.length;
                if (val.length >= maxLen) {
                    counter.style.color = '#ff6b6b';
                } else {
                    counter.style.color = 'rgba(247,249,244,0.4)';
                }
            }
            desc.addEventListener('input', updateCounter);
            desc.addEventListener('focus', function() {
                group.classList.add('focused');
            });
            desc.addEventListener('blur', function() {
                group.classList.remove('focused');
            });
            updateCounter(); // 초기화
        }
    });
    // 파일 선택 시 이미지 미리보기
    document.addEventListener('DOMContentLoaded', function() {
        const productImageInput = document.getElementById('productImage');
        const productImagePreview = document.getElementById('productImagePreview');
        if (productImageInput && productImagePreview) {
            productImageInput.addEventListener('change', function(e) {
                const file = this.files && this.files[0];
                if (file && file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(ev) {
                        productImagePreview.innerHTML = `
                            <div style="position:relative;display:inline-block;">
                                <img src='${ev.target.result}' alt='미리보기'>
                                <div class="preview-delete-btn" style="position:absolute;top:8px;right:8px;width:30px;height:30px;">
                                    <img src="images/icon-trash.svg" alt="삭제" style="width:16px;height:16px;">
                                </div>
                            </div>
                        `;
                        const delBtn = productImagePreview.querySelector('.preview-delete-btn');
                        if (delBtn) {
                            delBtn.onclick = function() {
                                productImageInput.value = '';
                                productImagePreview.innerHTML = '';
                            };
                        }
                    };
                    reader.readAsDataURL(file);
                } else {
                    productImagePreview.innerHTML = '';
                }
            });
        }
    });
    document.addEventListener('DOMContentLoaded', function() {
      const toggleBtn = document.getElementById('toggleProductAddBtn');
      const productAddGroup = document.querySelector('.product-add-group');
      const productAddUploadBtn = document.querySelector('.product-add-upload-btn');
      const toggleIcon = toggleBtn ? toggleBtn.querySelector('img') : null;
      if (toggleBtn && productAddGroup && productAddUploadBtn && toggleIcon) {
        toggleBtn.addEventListener('click', function() {
          const isClosed = productAddGroup.classList.contains('closed');
          if (isClosed) {
            productAddGroup.classList.remove('closed');
            productAddUploadBtn.classList.remove('closed');
            productAddUploadBtn.disabled = false;
          } else {
            productAddGroup.classList.add('closed');
            productAddUploadBtn.classList.add('closed');
            productAddUploadBtn.disabled = true;
          }
          toggleIcon.style.transition = 'transform 0.2s';
          toggleIcon.style.transform = isClosed ? 'rotate(180deg)' : 'rotate(0deg)';
          toggleBtn.blur();
        });
      }
    });
    document.addEventListener('DOMContentLoaded', function() {
        const productImageInput = document.getElementById('productImage');
        const productImageLabel = document.querySelector('.product-image-file-btn');
        if (productImageInput && productImageLabel) {
            productImageInput.addEventListener('focus', function() {
                productImageLabel.classList.add('focus');
            });
            productImageInput.addEventListener('blur', function() {
                productImageLabel.classList.remove('focus');
            });
        }
    });
    document.addEventListener('DOMContentLoaded', function() {
        const galleryFileInput = document.getElementById('galleryFile');
        const galleryFileLabel = document.getElementById('galleryFileLabel');
        if (galleryFileInput && galleryFileLabel) {
            galleryFileInput.addEventListener('change', function() {
                setTimeout(() => {
                    galleryFileLabel.blur();
                }, 150); // 클릭 피드백이 자연스럽게 보이도록 약간의 딜레이
            });
        }
    });
    </script>
</body>
</html> 